---
title: "Instant Apply"
description: "High-speed code generation engine optimized for real-time performance at 2000 tokens/second."
---

## Why Use Instant Apply?

Instant Apply splits code generation into two specialized steps:

- **Hard Reasoning:** Uses SOTA models like Claude for complex code understanding
- **Fast Integration:** Rapidly merges edits into existing code

This division optimizes both accuracy and speed, letting each system do what it does best.

## Key Features

**Zero Degradation:** Never abbreviates on long-context code merging tasks.

**Performance:** 9x faster than GPT-4o-mini with Predictive Edits.

**Context Handling:** Double the context output limit versus Cerebras and Claude.

**Token Efficient:** More reliable and uses fewer Claude tokens than SEARCH/REPLACE.

### Error Rate Comparison

![Relace Instant Apply Error Rate Graph Pn](/images/relace_instant_apply_error_rate_graph.png)

Comparison of error rates (truncations, hallucinations, and syntax errors) across different models. Instant Apply achieves a 2x lower error rate compared to other leading models.

## API Reference

### Endpoint

POST instantapply.endpoint.relace.run/v1/code/apply

### Request Body

initialCode - The existing code to modify

editSnippet - The edit snippet containing the modifications

stream - (Optional) Boolean to enable streaming response

### Example Request

<div style={{ whiteSpace: 'pre-wrap', overflowX: 'auto' }}>
```json
curl -X POST https://instantapply.endpoint.relace.run/v1/code/apply \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "initialCode": "import os \n def hello():\n    print(\"Hello, World!\")",
    "editSnippet": "# ... rest of code ... \ndef hello(name):\n    print(f\"Hello, {name}!\")",
    "stream": false
  }'
```
</div>

### Response

<div style={{ whiteSpace: 'pre-wrap', overflowX: 'auto' }}>
```json
// For non-streaming requests:
{
  "mergedCode": "def hello(name):\n    print(f\"Hello, {name}!\")"
}
```
</div>

<div style={{ whiteSpace: 'pre-wrap', overflowX: 'auto' }}>
```json
// For streaming requests:
data: {"choices": [{"delta": {"content": "def "}}]}
data: {"choices": [{"delta": {"content": "hello(name)"}}]}
data: {"choices": [{"delta": {"content": ":\n    "}}]}
data: {"choices": [{"delta": {"content": "print(f\"Hello, {name}!\")"}}]}
data: {"choices": [{"delta": {"content": "}"}}]}
```
</div>

## Try It Out

Download our sample implementation to get started:

<CardGroup cols="1">
  <Card title="Instant Apply Python Script" icon="merge" href="https://demo.relace.ai/assets/instant_apply.py">
    A simple example implementation showing the basic structure and usage of Instant Apply.
  </Card>
</CardGroup>

## Troubleshooting

The most common issues with Instant Apply stem from incorrect edit snippet formatting. The system requires complete, well-structured edit snippets that contain all necessary code elements for the final output.

### Edit Snippet Requirements

- Must include complete code blocks that will appear in the final output
- Should clearly indicate which parts of the code remain unchanged
- Must maintain correct indentation and code structure

### Best Practices

When using Claude or other LLMs to generate edit snippets, provide them with the following prompt structure. This ensures the output matches Instant Apply's expected format and reduces integration errors.

<div style={{ whiteSpace: 'pre-wrap', overflowX: 'auto' }}>
````python
# Recommended prompt structure for generating compatible edit snippets:

system_prompt = """Your job is to create an edit snippet that describes how you would like to modify the provided existing code to the user specifications.
Narrow your focus on the MODIFICATION REQUEST and NOT other aspects of the code.
Abbreviate any sections of the code in your response that will remain the same with "// ... rest of headers/sections/code ...". Be descriptive in the comment.
Make sure that you are abbreviating exactly where you believe the existing code will remain the same.
Indicate the location and nature of the modifications (additions and deletions) with comments and ellipses.
Make sure that you preserve the indentation and code structure of exactly how you believe the final code will look like (do not output lines that will not be in the final code after they are merged).
If you plan on deleting a section, please give the relevant context such that the code is understood to be removed, e.g., if the initial code is ```// code Block 1, Block 2, Block 3 // code```, and you want to remove Block 2, you would output ```/// rest of code Block 1, Block 2 // rest of code```."""
user_prompt = """EXISTING CODE:
{initial_code}
MODIFICATION REQUEST:
{user_instructions}"""
````
</div>