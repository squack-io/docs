---
title: 'Quickstart'
description: "Transition to Relace Repos as your coding agent's source control system"
---

## Prerequisites

- [Sign up](https://app.relace.ai) for a Relace account.
- Create an [API key](https://app.relace.ai/settings/api-keys).

<Steps>
  <Step title="Transfer Existing Source to Relace">

Start by transferring your existing repositories to Relace.

<CodeGroup>

```python From GitHub
import requests

url = "https://api.relace.run/v1/repo"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

data = {
    "source": {
        "type": "git",
        "url": "https://github.com/username/repository-name",
        "branch": "main"
    },
    "metadata": {...}  # Optional: add any custom properties
}

response = requests.post(url, headers=headers, json=data)
repo = response.json()
print(f"Repository created with ID: {repo['repo_id']}")
```

```python From Files
import requests

url = "https://api.relace.run/v1/repo"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

data = {
    "source": {
        "type": "files",
        "files": [
            {
                "filename": "src/main.py",
                "content": "def main():\n    print('Hello from my existing project!')\n\nif __name__ == '__main__':\n    main()"
            },
            # Add more files as needed
        ]
    },
    "metadata": {...}  # Optional: add any custom properties
}

response = requests.post(url, headers=headers, json=data)
repo = response.json()
print(f"Repository created with ID: {repo['repo_id']}")
```

```ts TypeScript SDK
import createRelaceClient from '@relace-ai/agent-client'

const client = createRelaceClient({ apiKey: process.env.RELACE_API_KEY! })

// From Git
await client.POST('/repo', {
  body: {
    source: {
      type: 'git',
      url: 'https://github.com/username/repository-name',
      branch: 'main',
    },
  },
})

// From files
await client.POST('/repo', {
  body: {
    source: {
      type: 'files',
      files: [
        {
          filename: 'src/main.py',
          content: "def main():\n    print('Hello')\n",
        },
      ],
    },
  },
})
```

```python Python SDK
from relace_agent_client import AuthenticatedClient
from relace_agent_client.api.default import create_repo_repo_post
from relace_agent_client.models import RepoCreateRequest, RepoCreateGitSource, RepoCreateFilesSource, File as ModelFile

client = AuthenticatedClient(base_url="https://api.relace.run/v1", token="YOUR_API_KEY")

# From Git
with client as c:
        created = create_repo_repo_post.sync(
                client=c,
                body=RepoCreateRequest(source=RepoCreateGitSource(type_="git", url="https://github.com/username/repository-name", branch="main")),
        )

# From files
files = [ModelFile(filename="src/main.py", content="print('Hello')\n")]
with client as c:
        created = create_repo_repo_post.sync(
                client=c,
                body=RepoCreateRequest(source=RepoCreateFilesSource(type_="files", files=files)),
        )
```

</CodeGroup>

    Keep track of the Relace `repo_id` in your database for future reference. You can optionally include a `metadata` parameter to add any properties of repos you want to maintain.

    If you have a lot of repos to transfer, you'll have to perform this step in batches. See the [policies section](/docs/policies#rate-limits) for information on rate limits.

  </Step>

  <Step title="Integrate Repos with Your Agent">

Now that your repositories live in Relace, you can integrate them with your agent's local file system. You can fetch the stored files directly from our API without needing to setup git on your host:

```python
import requests

url = f"https://api.relace.run/v1/repo/{repo_id}/clone"
headers = {
    "Authorization": "Bearer YOUR_API_KEY"
}

response = requests.get(url, headers=headers)
repo_files = response.json()

# The response contains all files with their content
for file in repo_files['files']:
    print(f"File: {file['filename']}")
    print(f"Content: {file['content'][:100]}...")  # First 100 characters
```

```ts TypeScript SDK
import createRelaceClient from '@relace-ai/agent-client'

const client = createRelaceClient({ apiKey: process.env.RELACE_API_KEY! })
const { data: clone } = await client.GET('/repo/{repo_id}/clone', {
  params: { path: { repo_id } },
})
for (const f of clone?.files ?? []) {
  console.log(f.filename, f.content.length)
}
```

```python Python SDK
from relace_agent_client import AuthenticatedClient
from relace_agent_client.api.default import clone_repo_repo_repo_id_clone_get

client = AuthenticatedClient(base_url="https://api.relace.run/v1", token="YOUR_API_KEY")
with client as c:
        clone = clone_repo_repo_repo_id_clone_get.sync(client=c, repo_id=repo_id)
for f in (clone.files or []):
        print(f.filename, len(f.content))
```

After your agent modifies files, push the changes back to Relace. You can either update specific files or overwrite all repository content.

<CodeGroup>

```python Diff Mode
import requests

# Apply specific file operations using diff mode
url = f"https://api.relace.run/v1/repo/{repo_id}/update"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

data = {
    "source": {
        "type": "diff",
        "operations": [
            {
                "type": "write",
                "filename": "src/main.py",
                "content": "def main():\n    print('Agent updated this function')\n    return True"
            },
            {
                "type": "rename",
                "old_filename": "src/helpers.ts"
                "new_filename": "src/utils.ts"
            },
            {
                "type": "delete",
                "filename": "old-unused-file.py"
            }
        ]
    }
}

response = requests.post(url, headers=headers, json=data)
print(f"Applied diff operations: {response.json()}")
```

```python Overwrite Mode
import requests

# Overwrite all repository content
url = f"https://api.relace.run/v1/repo/{repo_id}/update"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

data = {
    "source": {
        "type": "files",
        "files": [
            {
                "filename": "src/main.py",
                "content": "def main():\n    print('Agent completely rewrote this')\n    return True"
            },
            {
                "filename": "README.md",
                "content": "# Agent Updated Project\n\nThis project was updated by an AI agent."
            }
        ]
    }
}

response = requests.post(url, headers=headers, json=data)
print(f"Overwrote repository: {response.json()}")
```

```ts TypeScript SDK (Diff)
import createRelaceClient from '@relace-ai/agent-client'
const client = createRelaceClient({ apiKey: process.env.RELACE_API_KEY! })
await client.POST('/repo/{repo_id}/update', {
  params: { path: { repo_id } },
  body: {
    source: {
      type: 'diff',
      operations: [
        {
          type: 'write',
          filename: 'src/main.py',
          content: "print('updated')\n",
        },
        { type: 'delete', filename: 'old-unused-file.py' },
      ],
    },
  },
})
```

```python Python SDK (Diff)
from relace_agent_client import AuthenticatedClient
from relace_agent_client.api.default import update_repo_contents_repo_repo_id_update_post
from relace_agent_client.models import RepoUpdateRequest, RepoUpdateDiff, FileWriteOperation, FileDeleteOperation

client = AuthenticatedClient(base_url="https://api.relace.run/v1", token="YOUR_API_KEY")
req = RepoUpdateRequest(
        source=RepoUpdateDiff(
                type_="diff",
                operations=[
                        FileWriteOperation(type_="write", filename="src/main.py", content="print('updated')\n"),
                        FileDeleteOperation(type_="delete", filename="old-unused-file.py"),
                ],
        )
)
with client as c:
        update_repo_contents_repo_repo_id_update_post.sync(client=c, repo_id=repo_id, body=req)
```

</CodeGroup>

  </Step>

  <Step title="Use Built-In Semantic Retrieval">

Repositories stored in Relace get automatically indexed with our code embedding model and are refreshed with each code update. Use the retrieve endpoint as an agent tool to score files based on relevance to a user query.

```python
import requests

url = f"https://api.relace.run/v1/repo/{repo_id}/retrieve"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
data = {
    "query": "Add a user profile component with avatar and edit functionality",
}

response = requests.post(url, headers=headers, json=data)
results = response.json()["results"]
```

```ts TypeScript SDK
import createRelaceClient from '@relace-ai/agent-client'

const client = createRelaceClient({ apiKey: process.env.RELACE_API_KEY! })
const { data } = await client.POST('/repo/{repo_id}/retrieve', {
  params: { path: { repo_id } },
  body: {
    query: 'Add a user profile component',
    include_content: true,
    score_threshold: 0.3,
  },
})
console.log(data?.results)
```

```python Python SDK
from relace_agent_client import AuthenticatedClient
from relace_agent_client.api.default import retrieve_relevant_content_repo_repo_id_retrieve_post
from relace_agent_client.models import RepoRetrieveRequest

client = AuthenticatedClient(base_url="https://api.relace.run/v1", token="YOUR_API_KEY")
with client as c:
        r = retrieve_relevant_content_repo_repo_id_retrieve_post.sync(
                client=c,
                repo_id=repo_id,
                body=RepoRetrieveRequest(query="Add a user profile component", include_content=True, score_threshold=0.3),
        )
print(r)
```

You can parse the results the same way you do with direct calls to the reranker.

```json
[
  {
    "filename": "src/components/UserProfile.tsx",
    "score": 0.9598
  },
  {
    "filename": "src/types/user.ts",
    "score": 0.0321
  },
  {
    "filename": "src/components/Header.tsx",
    "score": 0.0014
  }
]
```

    For more details, see our [API reference](/api-reference/introduction).

  </Step>
</Steps>
