---
title: 'Apply Code'
openapi: 'POST /v1/code/apply'
description: 'Merge code snippets from an LLM into your existing codebase with high precision and speed'
---

## Overview

The Instant Apply endpoint is designed to efficiently merge code changes generated by frontier LLMs into your existing codebase. Instead of requiring full file rewrites, this endpoint accepts abbreviated code snippets and intelligently merges them into the original code.

## Key Benefits

- **3-4x faster** than full file rewrites
- **3x more cost-effective** on output tokens from frontier models  
- **10,000 tokens/sec** processing speed on average
- **2x fewer errors** compared to other merge approaches

## Best Practices

### Input Format
Structure your edit snippets using natural commenting patterns that all LLMs produce well:

```javascript
// ... keep existing code

function newFunction() {
  // Your new code here
}

// ... rest of existing code
```

### Optimization Tips

1. **Use abbreviated snippets**: Only include the new/changed code with contextual markers
2. **Avoid structured diff formats**: uDiff and search-and-replace have higher error rates
3. **Include sufficient context**: Add enough surrounding code for proper placement
4. **Enable streaming**: Use `stream: true` for real-time feedback on longer operations

## Integration Patterns

### Workflow Integration
```python
# 1. Get code changes from your LLM
edit_snippet = llm.generate_edit(original_code, user_request)

# 2. Apply changes efficiently  
response = relace.apply_code(
    initial_code=original_code,
    edit_snippet=edit_snippet,
    stream=False
)

# 3. Use the merged result
merged_code = response['mergedCode']
```

### Agent Integration
For AI agents that continuously modify code:

```python
# Maintain state and apply incremental changes
current_code = load_current_file()
for change in planned_changes:
    edit = generate_focused_edit(change, current_code)
    result = relace.apply_code(current_code, edit)
    current_code = result['mergedCode']
```

## Error Handling

The endpoint returns structured errors for common issues:
- **Syntax errors**: When the merge would create invalid code
- **Context mismatches**: When the edit snippet can't be properly placed
- **Token limits**: When input exceeds processing limits

See the [Error Codes](/api-reference/errors) documentation for comprehensive error handling guidance.
